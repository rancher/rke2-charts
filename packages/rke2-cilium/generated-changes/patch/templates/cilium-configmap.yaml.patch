--- charts-original/templates/cilium-configmap.yaml
+++ charts/templates/cilium-configmap.yaml
@@ -1,3 +1,10 @@
+{{- if empty .Values.global.clusterCIDRv4 }}
+{{- $_ := set .Values.ipv4 "enabled" false -}}
+{{- end }}
+
+{{- if not (empty .Values.global.clusterCIDRv6) }}
+{{- $_ := set .Values.ipv6 "enabled" true -}}
+{{- end }}
 {{- if and ( or (.Values.agent) (.Values.operator.enabled) .Values.clustermesh.useAPIServer) (not .Values.preflight.enabled) }}
 {{- /*  Default values with backwards compatibility */ -}}
 {{- $defaultBpfMapDynamicSizeRatio := 0.0 -}}
@@ -325,7 +332,11 @@
 
   # Enable IPv6 addressing. If enabled, all endpoints are allocated an IPv6
   # address.
-  enable-ipv6: {{ .Values.ipv6.enabled | quote }}
+{{- if coalesce .Values.global.clusterCIDRv6 .Values.ipv6.enabled }}
+  enable-ipv6: "true"
+{{ else }}
+  enable-ipv6: "false"
+{{- end }}
 
 {{- if .Values.cleanState }}
   # If a serious issue occurs during Cilium startup, this
